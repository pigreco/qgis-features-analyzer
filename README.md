# QGIS Features Analyzer

Python tools to extract and analyze QGIS features from changelog archives. Converts release notes into structured CSV data with developer attribution, funding sources, and version metadata.

## ğŸ“‹ Description

This project provides Python scripts to automate the extraction and analysis of QGIS features from official changelog pages (versions 3.0 to 3.44):

1. **download_qgis_zips.py** - Downloads ZIP archives containing changelogs in Markdown format
2. **extract_raw_features.py** - Extracts raw information from Markdown files without normalization
3. **normalize_developers.py** - Normalizes developer names using fuzzy matching (similar to OpenRefine)
4. **normalize_features.py** - Normalizes developer names and data from the raw CSV file
5. **extract_companies_developers.py** - Creates company-centric mapping with intelligent normalization
6. **extract_developers_companies.py** - Extracts a mapping of developers to their associated companies

## ğŸš€ Installation

```bash
# Clone the repository
git clone https://github.com/pigreco/qgis-features-analyzer.git
cd qgis-features-analyzer

# Install dependencies
pip install -r requirements.txt
```

## ğŸ“¦ Dependencies

- `requests` >= 2.31.0
- `beautifulsoup4` >= 4.12.0
- `rapidfuzz` >= 3.0.0 (for fuzzy name matching)

## ğŸ’» Usage

### 1. Download changelogs

```bash
python3 scripts/download_qgis_zips.py
```

This script:
- Reads the list of changelog URLs from `changelog_urls.txt`
- Downloads ZIP archives from official QGIS changelogs (versions 3.0-3.44)
- Saves files to the `data/qgis_downloads/` directory
- Shows progress status for each version

### 2. Extract and normalize features

```bash
# Step 1: Extract raw data
python3 scripts/extract_raw_features.py

# Step 2: Normalize developer names using fuzzy matching
python3 scripts/normalize_developers.py

# Step 3: Normalize data (optional, uses raw CSV)
python3 scripts/normalize_features.py

# Step 4: Extract company-centric mapping
python3 scripts/extract_companies_developers.py

# Step 5 (optional): Extract developer-centric mapping
python3 scripts/extract_developers_companies.py

# Step 6 (optional): Validate mappings against reference data
python3 scripts/validate_companies_mapping.py
```

**Scripts description:**
- `extract_raw_features.py` extracts raw information without normalization and generates `output/qgis_features_raw.csv`
- `normalize_developers.py` uses fuzzy matching (similar to OpenRefine) to find and normalize similar developer names, generating `output/qgis_features_normalized_dev.csv` and `output/developer_normalizations.txt`
- `normalize_features.py` reads the raw CSV and applies normalization rules to generate `output/qgis_features_normalized.csv`
- `extract_companies_developers.py` creates a company-centric view with intelligent normalization, using the fuzzy-normalized data
- `extract_developers_companies.py` analyzes the data to create a mapping of developers to their companies and saves it to `output/developers_companies.txt`
- `validate_companies_mapping.py` validates the extracted mappings against reference team data from `data/` folder, generating a detailed validation report

### 3. Validation and Quality Assurance

The project includes reference data for major QGIS contributor companies in the `data/` folder:
- **Lutra Consulting** (27 team members)
- **OPENGIS.ch** (36 team members)
- **Oslandia** (5 team members)
- **North Road** (1 core developer)
- **Kartoza** (12 team members)
- **Faunalia** (3 team members)
- **QCooperative** (3 team members)
- **Spatialys** (2 team members)
- **3Liz** (3 team members)

Run the validation script to check the accuracy of developer-company mappings:

```bash
python3 scripts/validate_companies_mapping.py
```

This will generate `output/validation_report.txt` with:
- âœ… Validated developers (exact matches with reference data)
- ğŸ’¡ Suggestions for normalization (fuzzy matches)
- â“ Developers not in reference data (possible past employees)
- ğŸ” Team members not found in feature mappings

## ğŸ“Š Output

The generated CSV files contain the following columns:

- **Version** - QGIS version (e.g., 3.44, 3.42, etc.)
- **Category** - Feature category
- **Feature** - Feature name/description
- **Developer** - Developer who implemented the feature
- **Funder** - Organization/entity that funded the development

### Output files:
- **output/qgis_features_raw.csv** - Generated by `extract_raw_features.py` (raw data without normalization)
- **output/qgis_features_normalized.csv** - Generated by `normalize_features.py` (normalized data)
- **output/developers_companies.txt** - Generated by `extract_developers_companies.py` (mapping of developers to companies)

## ğŸ“ Project Structure

```
qgis-features-analyzer/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ download_qgis_zips.py              # Script for downloading changelogs
â”‚   â”œâ”€â”€ extract_raw_features.py            # Script for extracting raw features
â”‚   â”œâ”€â”€ normalize_features.py              # Script for normalizing data
â”‚   â”œâ”€â”€ normalize_developers.py            # Script for fuzzy normalization of developer names
â”‚   â”œâ”€â”€ extract_companies_developers.py    # Script for extracting companies-developers mapping
â”‚   â”œâ”€â”€ extract_developers_companies.py    # Script for extracting developers-companies mapping
â”‚   â””â”€â”€ validate_companies_mapping.py      # Script for validating mappings against reference data
â”œâ”€â”€ output/
â”‚   â”œâ”€â”€ qgis_features_raw.csv              # Generated CSV file (raw data)
â”‚   â”œâ”€â”€ qgis_features_normalized.csv       # Generated CSV file (normalized data)
â”‚   â”œâ”€â”€ qgis_features_normalized_dev.csv   # Generated CSV file (fuzzy normalized developer names)
â”‚   â”œâ”€â”€ companies_developers.csv           # Company-centric mapping (CSV format)
â”‚   â”œâ”€â”€ companies_developers.txt           # Company-centric mapping (readable format)
â”‚   â”œâ”€â”€ developers_companies.txt           # Developer-centric mapping
â”‚   â”œâ”€â”€ developer_normalizations.txt       # Fuzzy normalization report
â”‚   â””â”€â”€ validation_report.txt              # Validation report against reference data
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ qgis_downloads/                    # Directory with downloaded ZIP files (ignored by git)
â”‚   â”œâ”€â”€ lutra_consulting_team.csv          # Lutra Consulting team reference data
â”‚   â”œâ”€â”€ opengis_team.csv                   # OPENGIS.ch team reference data
â”‚   â”œâ”€â”€ oslandia_team.csv                  # Oslandia team reference data
â”‚   â”œâ”€â”€ north_road_team.csv                # North Road team reference data
â”‚   â”œâ”€â”€ kartoza_team.csv                   # Kartoza team reference data
â”‚   â”œâ”€â”€ faunalia_team.csv                  # Faunalia team reference data
â”‚   â”œâ”€â”€ qcooperative_team.csv              # QCooperative team reference data
â”‚   â”œâ”€â”€ spatialys_team.csv                 # Spatialys team reference data
â”‚   â””â”€â”€ 3liz_team.csv                      # 3Liz team reference data
â”œâ”€â”€ changelog_urls.txt                     # List of QGIS changelog URLs
â”œâ”€â”€ requirements.txt                       # Python dependencies
â”œâ”€â”€ README.md                              # This file
â””â”€â”€ LICENSE                                # Project license
```

## ğŸ”§ Configuration

### Supported versions

The script supports the following QGIS versions:
- 3.44, 3.42, 3.40, 3.38, 3.36, 3.34, 3.32, 3.30
- 3.28, 3.26, 3.24, 3.22, 3.20, 3.18, 3.16, 3.14
- 3.12, 3.10, 3.8, 3.6.0, 3.4-LTR, 3.2.0, 3.0.0

To add new versions, edit the [changelog_urls.txt](changelog_urls.txt) file by adding new URLs (one per line). Lines starting with `#` are treated as comments.

## ğŸ“ Notes

- The `data/qgis_downloads/` directory is ignored by git to avoid versioning large files
- The `output/` directory contains all generated CSV and text files
- The script automatically handles any download or parsing errors
- Files are processed in order from the most recent to the oldest version

## ğŸ¤ Contributing

Contributions, issues, and feature requests are welcome!

## ğŸ¤– Development

These scripts were developed with the assistance of AI (Claude AI).

## ğŸ“„ License

See the [LICENSE](LICENSE) file for details.
